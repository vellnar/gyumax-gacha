<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>抽選中...</title>
<style>
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    padding: 80px 20px;
    text-align: center;
    font-family: 'Segoe UI', sans-serif;
    transition: all 0.5s ease;
    opacity: 0;
    animation: fadeIn 1.2s ease forwards;
  }
  @keyframes fadeIn {
    to { opacity: 1; }
  }
  .spinner {
    width: 80px; height: 80px;
    border-radius: 50%;
    margin: 40px auto;
    animation: spin 1s linear infinite, pulse 2s ease-in-out infinite;
    box-shadow: 0 0 15px rgba(255,255,255,0.4);
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  .text {
    font-size: 1.4rem;
    margin-top: 20px;
    min-height: 1.5em;
  }
  /* --- Theme Styles --- */
  .theme-A { background-color: #000; color: gold; }
  .theme-A .spinner {
    border: 12px solid #222;
    border-top: 12px solid gold;
  }
  .theme-B { background-color: #f5f5f5; color: #333; }
  .theme-B .spinner {
    border: 12px solid #ddd;
    border-top: 12px solid orange;
  }
  .theme-C { background-color: #111; color: #eee; }
  .theme-C .spinner {
    border: 12px solid #222;
    border-top: 12px solid #999;
  }
  .theme-D { background-color: #fff9e6; color: #d60000; }
  .theme-D .spinner {
    border: 12px solid #ccc;
    border-top: 12px solid #00bcd4;
  }
  .theme-E { background-color: #e0e0e0; color: #555; }
  .theme-E .spinner {
    border: 12px solid #aaa;
    border-top: 12px solid #888;
  }
  .theme-F { background-color: #1a1a1a; color: #39ff14; }
  .theme-F .spinner {
    border: 12px solid #333;
    border-top: 12px solid #ff00ff;
  }
  .theme-G { background-color: #f5e3c0; color: #990000; }
  .theme-G .spinner {
    border: 12px solid #b5651d;
    border-top: 12px solid #ff0000;
  }
  .theme-H { background-color: #000; color: red; animation: glitch-bg 1s infinite; }
  .theme-H .spinner {
    border: 12px solid #400000;
    border-top: 12px solid red;
  }
  .theme-I { background-color: #000; color: #00ffff; animation: glitch-bg 1s infinite; }
  .theme-I .spinner {
    border: 12px solid #002244;
    border-top: 12px solid #00ffff;
  }
  @keyframes glitch-bg {
    0%, 100% { filter: hue-rotate(0deg); }
    50% { filter: hue-rotate(15deg); }
  }
</style>
</head>
<body>
  <div class="spinner"></div>
  <div class="text" id="loadingText"></div>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");
    const loadingTextMap = {
      A: "ライバルは、全団体。抽選中...",
      B: "肉を求める本能 抽選中...",
      C: "それは、ただの串じゃない 抽選中...",
      D: "ブチアゲろ、牛肉魂！ 抽選中...",
      E: "もう一度食べたくなる、そんな味。 抽選中...",
      F: "ネオンの中で炎が踊る… 抽選中...",
      G: "香ばしさの極みへ… 抽選中...",
      H: "神々の裁きが下る… 抽選中...",
      I: "蒼き神の啓示… 抽選中..."
    };

    const textEl = document.getElementById("loadingText");
    function typeText(text, el, delay = 50) {
      el.textContent = "";
      [...text].forEach((char, i) => {
        setTimeout(() => {
          el.textContent += char;
        }, i * delay);
      });
    }

    if (!id || !loadingTextMap[id]) {
      textEl.innerText = "無効なポスターIDです。";
    } else {
      document.body.classList.add(`theme-${id}`);
      typeText(loadingTextMap[id], textEl);
      localStorage.setItem(`gyumax_${id}`, 'true');
      const isAtari = Math.random() < 0.3;
      setTimeout(() => {
        const nextUrl = isAtari ? `atari.html?id=${id}` : `hazure.html?id=${id}`;
        window.location.href = nextUrl;
      }, 3000);
    }
  </script>
</body>
</html>
